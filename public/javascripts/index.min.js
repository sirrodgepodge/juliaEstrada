/*! juliaEstrada 2016-01-12 */
function listeners() {
    calcTriggerPoints(), $window.resize(calcTriggerPoints), $window.scroll(landingScroll);
}

function calcTriggerPoints() {
    titleTop = $title.offset().top, titleHeight = $title.height(), landingHeadFixPoint = titleTop - $landingHead.position().top, 
    contactTop = .92 * $contact.offset().top, downAnimReached = .395 * titleTop + 4.5, 
    landingScroll();
}

function landingScroll() {
    pagePos = window.pageYOffset, !landingTogglerClicked && (pagePos >= landingHeadFixPoint && !landingHeadFixed || landingHeadFixPoint > pagePos && landingHeadFixed) && ($landingHead.toggleClass("hide"), 
    $title.toggleClass("show-logo"), landingHeadFixed = !landingHeadFixed), downAnimReached > pagePos && !topTextShowing && (topTextShowing = !0), 
    0 === pagePos ? $landingContent.add($downAnim).css("opacity", 1) : pagePos >= downAnimReached && topTextShowing ? $landingContent.add($downAnim).css("opacity", +(topTextShowing = !1)) : pagePos > 0 && downAnimReached > pagePos && $landingContent.add($downAnim).css("opacity", 1 - pagePos / downAnimReached), 
    (pagePos >= titleTop && !titleFixed || titleTop > pagePos && titleFixed) && ($title.toggleClass("sticky"), 
    $placeHolder.toggleClass("no-show"), titleFixed = !titleFixed), (pagePos >= contactTop && !contactPopped || contactTop > pagePos && contactPopped) && ($contact.toggleClass("poppin"), 
    contactPopped = !contactPopped);
}

var $window = $(window), $purchaseToggle = $(".purchase-toggle"), $coffeeInd = $(".coffee-ind"), $buyBtn = $(".buy-btn"), $coffeePrice = $(".coffee-price"), $merchIndBack = $(".merch-ind .back"), $size = $merchIndBack.children(".size"), $placeHolder = $(".place-holder"), $landingHead = $(".landing-head"), $title = $(".title"), $contact = $("#contact"), $landing = $("#landing"), $landingContent = $landing.find(".landing-content").children(), $landingTogglers = $landing.find(".landing-tab"), $downAnim = $landing.find(".down-anim"), $contactImg = $(".contact-img"), $contactSub = $(".contact-sub"), $contactSubInside = $contactSub.find(".contact-sub-inside"), $scrollTo = $(".scroll-to"), $backToTop = $(".back-to-top"), $paperResumeWrapper = $(".paper-resume-wrapper"), coffee = [], merch = [], contact = {};

$.get("/api/info", function(data) {
    coffee = data.coffee.product, merch = data.merch, contact = data.contact;
});

var landingTogglerClicked = !1, main = function() {
    function slideSwitchText(val) {
        $contactSubInside.toggleClass("show"), setTimeout(function() {
            $contactSubInside.text(val), $contactSubInside.toggleClass("show"), $contactSub.innerWidth($contactSubInside.width());
        }, 525);
    }
    $scrollTo.click(function() {
        $($(this).data("scrollTo")).ScrollTo({
            duration: 1e3,
            offsetTop: titleHeight - 16
        });
    }), $landingTogglers.click(function() {
        var notSelImg, tempThis;
        if (!$(this).hasClass("landing-active")) if ($landingHead.hasClass("fade-out")) {
            var $startLandingActive = $(".landing-active");
            $startLandingActive.toggleClass("landing-active"), $startLandingActive.children(".full").toggleClass("show"), 
            $(this).toggleClass("landing-active"), tempThis = this, notSelImg = $(".landing-img").not(".show"), 
            $(".landing-img.show").toggleClass("show"), setTimeout(function() {
                $(tempThis).children(".full").toggleClass("show"), notSelImg.toggleClass("show");
            }, 400);
        } else $landingHead.addClass("fade-out"), landingTogglerClicked = !landingTogglerClicked && !!$title.addClass("show-logo"), 
        $(this).toggleClass("landing-active"), tempThis = this, $(this).hasClass("tab-2") ? (notSelImg = $(".landing-img").not(".show"), 
        $(".landing-img.show").toggleClass("show"), setTimeout(function() {
            $(tempThis).children(".full").toggleClass("show"), notSelImg.toggleClass("show");
        }, 400)) : setTimeout(function() {
            $(tempThis).children(".full").toggleClass("show");
        }, 400);
    }), $downAnim.click(function() {
        $("html, body").animate({
            scrollTop: titleTop
        }, titleTop - .8 * $(window).scrollTop());
    }), $contactSub.innerWidth($contactSubInside.width()), $contactImg.mouseenter(function() {
        var selected = $(this).attr("class").split(" ")[1];
        $contactSubInside.text() !== contact[selected].text && ($contactSub.attr("href", contact[selected].link), 
        !!contact[selected].link === $contactSub.hasClass("disable-link") && $contactSub.toggleClass("disable-link"), 
        slideSwitchText(contact[selected].text));
    }), listeners();
}, titleTop, titleHeight, landingHeadFixPoint, contactTop, downAnimReached, backToTopTop, pagePos = 0, titleFixed = !1, landingHeadFixed = !1, topTextShowing = !0, contactPopped = !1;

$(document).ready(main);