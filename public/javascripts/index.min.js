/*! juliaEstrada 2016-01-20 */
function slideSwitchText(a){$contactSubInside.toggleClass("show"),setTimeout(function(){$contactSubInside.text(a),$contactSubInside.toggleClass("show"),$contactSub.innerWidth($contactSubInside.width())},525)}function initBufferVideo(a){playVideo(a),setTimeout(stopVideo(a),400)}function playVideo(a){a[0].contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}function stopVideo(a){a[0].contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")}function listeners(){calcTriggerPoints(),$window.resize(calcTriggerPoints),$window.scroll(landingScroll)}function calcTriggerPoints(){titleTop=Math.ceil($title.offset().top)+1,titleHeight=Math.ceil($title.height()),landingHeadFixPoint=titleTop-Math.ceil($landingHead.position().top)+1,contactTop=.92*Math.ceil($contact.offset().top),downAnimReached=Math.ceil(.395*titleTop+4.5),photosSectTop=Math.ceil(.82*$photosSect.offset().top),landingScroll()}function landingScroll(){pagePos=window.pageYOffset,!landingTogglerClicked&&(pagePos>=landingHeadFixPoint&&!landingHeadFixed||landingHeadFixPoint>pagePos&&landingHeadFixed)&&($landingHead.toggleClass("hide"),$title.toggleClass("show-logo"),landingHeadFixed=!landingHeadFixed),downAnimReached>pagePos&&!topTextShowing&&(topTextShowing=!0),0===pagePos?$landingContent.add($downAnim).css("opacity",1):pagePos>=downAnimReached&&topTextShowing?$landingContent.add($downAnim).css("opacity",+(topTextShowing=!1)):pagePos>0&&downAnimReached>pagePos&&$landingContent.add($downAnim).css("opacity",1-pagePos/downAnimReached),(pagePos>=titleTop&&!titleFixed||titleTop>pagePos&&titleFixed)&&($title.toggleClass("sticky"),$placeHolder.toggleClass("no-show"),titleFixed=!titleFixed),!photosTriggered&&pagePos>photosSectTop&&($photosSect.addClass("triggered"),photosTriggered=!0),(pagePos>=contactTop&&!contactPopped||contactTop>pagePos&&contactPopped)&&($contact.toggleClass("poppin"),contactPopped=!contactPopped)}var $window=$(window),$placeHolder=$(".place-holder"),$landingHead=$(".landing-head"),$title=$(".title"),$contact=$("#contact"),$landing=$("#landing"),$landingContent=$landing.find(".landing-content").children(),$landingTogglers=$landing.find(".landing-tab"),$downAnim=$landing.find(".down-anim"),$contactImg=$(".contact-img"),$contactSub=$(".contact-sub"),$contactSubInside=$contactSub.find(".contact-sub-inside"),$scrollTo=$(".scroll-to"),$floatFold=$(".float-fold"),$photosSect=$("#photos"),$videoBtn=$(".video-btn"),$videos=$(".video"),floatFoldImgRegex=/background-image: url\(\)/g,contact={};$.get("/api/info",function(a){contact=a.contact});var landingTogglerClicked=!1,main=function(){$scrollTo.click(function(){console.log(this),$($(this).data("scrollTo")).ScrollTo({duration:1e3,offsetTop:titleHeight+("#videos"===$(this).data("scrollTo")?titleHeight:3)})});var a,b=6,c="";for(a=1;b+1>a;a++)c+='<div class="slice total-slices-'+b+" slice-"+a+'" style="background-image: url(), linear-gradient(top, rgba(0,0,0,0) 0%,rgba(0,0,0, .7) 100%); background-image: url(), -webkit-linear-gradient(top, rgba(0,0,0,0) 0%,rgba(0,0,0, .7) 100%); background-image: url(), -moz-linear-gradient(top, rgba(0,0,0,0) 0%,rgba(0,0,0, .7) 100%); background-image: url(), -ms-linear-gradient(top, rgba(0,0,0,0) 0%,rgba(0,0,0, .7) 100%); background-image: url(), -o-linear-gradient(top, rgba(0,0,0,0) 0%,rgba(0,0,0, .7) 100%);">';for(a=b;a>0;a--)c+="</div>";$floatFold.each(function(a){var b=$(this),d=b.attr("src"),e=b.attr("class");b.replaceWith($('<div class="'+e+" float-fold-"+a+" float-fold-total-"+$floatFold.length+'"></div>').append($(c.replace(floatFoldImgRegex,"background-image: url("+d+")"))))}),$landingTogglers.click(function(){var a,b;if(!$(this).hasClass("landing-active"))if($landingHead.hasClass("fade-out")){var c=$(".landing-active");c.toggleClass("landing-active"),c.children(".full").toggleClass("show"),$(this).toggleClass("landing-active"),b=this,a=$(".landing-img").not(".show"),$(".landing-img.show").toggleClass("show"),setTimeout(function(){$(b).children(".full").toggleClass("show"),a.toggleClass("show")},400)}else $landingHead.addClass("fade-out"),landingTogglerClicked=!landingTogglerClicked&&!!$title.addClass("show-logo"),$(this).toggleClass("landing-active"),b=this,$(this).hasClass("tab-2")?(a=$(".landing-img").not(".show"),$(".landing-img.show").toggleClass("show"),setTimeout(function(){$(b).children(".full").toggleClass("show"),a.toggleClass("show")},400)):setTimeout(function(){$(b).children(".full").toggleClass("show")},400)}),$downAnim.click(function(){$("html, body").animate({scrollTop:titleTop},titleTop-.8*$(window).scrollTop())}),$contactSub.innerWidth(.95*$contactSubInside.width()),$contactImg.mouseenter(function(){var a=$(this).attr("class").split(" ")[1];$contactSubInside.text()!==contact[a].text&&($contactSub.attr("href",contact[a].link),!!contact[a].link===$contactSub.hasClass("disable-link")&&$contactSub.toggleClass("disable-link"),slideSwitchText(contact[a].text))}),$contactImg.click(function(){return $window.width()<768?!1:void 0}),listeners(),$videos.each(function(){initBufferVideo($(this))}),$videoBtn.click(function(){var a=$(this).addClass("bring-backward");playVideo(a.siblings(".picture").children(".video")),a.siblings(".picture").addClass("bring-video-forward")})},titleTop,titleHeight,landingHeadFixPoint,contactTop,downAnimReached,photosSectTop,pagePos=0,titleFixed=!1,landingHeadFixed=!1,topTextShowing=!0,contactPopped=!1,photosTriggered=!1;$(document).ready(main);